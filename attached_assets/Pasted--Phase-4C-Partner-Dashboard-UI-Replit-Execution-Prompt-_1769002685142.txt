
üöÄ Phase 4C ‚Äî Partner Dashboard UI

Replit Execution Prompt (Authoritative)

‚∏ª

CONTEXT (READ CAREFULLY)

You are implementing Phase 4C ‚Äî Partner Dashboard UI for the WebWaka platform.

This is a UI CONSUMER PHASE, not a control or core phase.

The Partner Dashboard UI must be a pure declarative consumer of canonical control packages and must strictly follow the WebWaka Ecosystem Constitution v1.5+.

üö´ DO NOT implement control logic
üö´ DO NOT define permissions, entitlements, or feature flags
üö´ DO NOT reimplement dashboard resolution
üö´ DO NOT hardcode visibility rules
üö´ DO NOT add business logic
üö´ DO NOT create new control packages

‚∏ª

REPOSITORY (IMMUTABLE)

You MUST work only in this repository:

changerplanet/webwaka-suite-partner-dashboard-ui

CRITICAL RULE ‚Äî CLONING
	‚Ä¢	CLONE THE REPOSITORY EXACTLY AS-IS
	‚Ä¢	If the repo is empty or near-empty:
	‚Ä¢	‚ùå DO NOT scaffold templates
	‚Ä¢	‚ùå DO NOT add placeholders
	‚Ä¢	‚ùå DO NOT add demo data
	‚Ä¢	If Replit auto-adds files:
	‚Ä¢	DELETE them immediately before proceeding

If the repository is not cloned correctly, you MUST STOP and report.

‚∏ª

SOURCE OF TRUTH (IMMUTABLE)

Constitution
	‚Ä¢	WebWaka Ecosystem Constitution v1.5+

Canonical Control Packages (MANDATORY)

You MUST consume these packages from GitHub:

npm install \
  github:changerplanet/webwaka-core-dashboard-control \
  github:changerplanet/webwaka-suite-partner-dashboard-control

üö® If installation fails ‚Üí STOP and report immediately.

‚∏ª

OBJECTIVE

Build the Partner Dashboard UI as a pure declarative consumer that:
	‚Ä¢	Uses Phase 4A dashboard control engine
	‚Ä¢	Uses Partner-specific dashboard control package
	‚Ä¢	Resolves visibility server-side
	‚Ä¢	Renders pre-resolved dashboard data only
	‚Ä¢	Supports snapshot-based offline rendering
	‚Ä¢	Contains zero control logic in UI components

‚∏ª

REQUIRED ARCHITECTURE

1Ô∏è‚É£ Single Control Consumer (MANDATORY)

Create:

src/lib/control-consumer.ts

This file MUST be the only place that imports control packages.

Example pattern (adapt as needed):

import {
  resolveDashboard,
  generateDashboardSnapshot,
  verifyDashboardSnapshot,
  evaluateFromSnapshot,
} from 'webwaka-core-dashboard-control';

import {
  resolvePartnerDashboard,
  generatePartnerDashboardSnapshot,
  verifyPartnerDashboardSnapshot,
} from 'webwaka-suite-partner-dashboard-control';

export {
  resolveDashboard,
  generateDashboardSnapshot,
  verifyDashboardSnapshot,
  evaluateFromSnapshot,
  resolvePartnerDashboard,
  generatePartnerDashboardSnapshot,
  verifyPartnerDashboardSnapshot,
};

üö´ No other file may import control packages.

‚∏ª

2Ô∏è‚É£ Server-Side Resolution (MANDATORY)
	‚Ä¢	Dashboard resolution MUST occur in a server component
	‚Ä¢	Example: app/page.tsx
	‚Ä¢	Server must:
	‚Ä¢	Call resolvePartnerDashboard(context)
	‚Ä¢	Generate snapshot via canonical control package
	‚Ä¢	Pass resolved dashboard + snapshot as props to client components

‚∏ª

3Ô∏è‚É£ Client UI = Pure Rendering Only

Client components:
	‚Ä¢	MUST NOT import control packages
	‚Ä¢	MUST NOT evaluate permissions, entitlements, or flags
	‚Ä¢	MUST render based ONLY on:
	‚Ä¢	resolvedDashboard.sections[].visible
	‚Ä¢	resolvedDashboard.sections[].hiddenReason

‚∏ª

4Ô∏è‚É£ Dashboard Scope (Partner)

Implement UI sections based on resolved output, such as:
	‚Ä¢	Overview
	‚Ä¢	Tenants
	‚Ä¢	Pricing
	‚Ä¢	Incentives
	‚Ä¢	Feature Flags
	‚Ä¢	Branding
	‚Ä¢	Audit
	‚Ä¢	AI / Automation
	‚Ä¢	Settings

‚ö†Ô∏è Visibility comes ONLY from control engine ‚Äî not UI decisions.

‚∏ª

5Ô∏è‚É£ Snapshot Support (MANDATORY)
	‚Ä¢	Support rendering from:
	‚Ä¢	Live resolved dashboard
	‚Ä¢	Verified snapshot (offline-safe)
	‚Ä¢	Snapshot verification MUST use canonical checksum logic

‚∏ª

NON-NEGOTIABLE CONSTRAINTS

‚ùå No role-based UI logic
‚ùå No permission checks in UI
‚ùå No entitlement checks in UI
‚ùå No feature flag checks in UI
‚ùå No Math.random() in control paths
‚ùå No Date.now() usage (use explicit evaluationTime)
‚ùå No demo or placeholder business data

‚∏ª

TESTING REQUIREMENTS (MANDATORY)

You MUST include tests proving:
	1.	Visibility changes when control inputs change
	2.	Same input ‚Üí same output (10√ó determinism test)
	3.	Snapshot rendering matches live rendering
	4.	No UI file imports control packages except control-consumer.ts
	5.	Build fails loudly on error

‚∏ª

BUILD & CI RULES
	‚Ä¢	npm test MUST fail on failure (no masking)
	‚Ä¢	npm run build MUST pass
	‚Ä¢	No || true, no silent skips

‚∏ª

REQUIRED FINAL OUTPUT

Provide a Phase 4C Completion Report containing:

A. Architecture Confirmation
	‚Ä¢	Repo name
	‚Ä¢	Control packages installed
	‚Ä¢	Single consumer proof

B. Visibility Proof
	‚Ä¢	Example resolved dashboard
	‚Ä¢	Hidden reason explanations

C. Snapshot Proof
	‚Ä¢	Snapshot generation
	‚Ä¢	Snapshot verification
	‚Ä¢	Offline rendering parity

D. Test Results
	‚Ä¢	Test count
	‚Ä¢	Coverage summary

E. Build Status
	‚Ä¢	npm run build output (success)

‚∏ª

‚õî HARD STOP

After completing Phase 4C:

‚õî STOP
‚õî Do NOT proceed to Phase 4D
‚õî Await explicit authorization

‚∏ª

ACKNOWLEDGEMENT FORMAT (MANDATORY)

Reply only with:

‚ÄúPhase 4C acknowledged. Cloning repository and proceeding exactly as instructed.‚Äù

Then execute.