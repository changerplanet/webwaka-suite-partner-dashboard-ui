
âœ… PHASE 4C â€” REPLIT EXECUTION PROMPT

(Canonical, npm-only, constitutionally compliant)

â¸»

CONTEXT (READ CAREFULLY)

You are executing Phase 4C â€” Dashboard UI Continuation for the WebWaka ecosystem.

This phase is UNBLOCKED.

All canonical control packages are now published to the public npm registry under the @webwaka/* scope and MUST be consumed exclusively via npm.

ğŸš¨ GitHub-based dependency installation is strictly forbidden in this phase.

This is a CONTROL-CONSUMPTION PHASE, not control implementation.

â¸»

ğŸš« HARD PROHIBITIONS (NON-NEGOTIABLE)

DO NOT:
	â€¢	âŒ Use github:changerplanet/...
	â€¢	âŒ Use https://github.com/...
	â€¢	âŒ Use SSH-based installs
	â€¢	âŒ Reimplement control logic locally
	â€¢	âŒ Add placeholder control logic
	â€¢	âŒ Add demo permissions / entitlements / flags
	â€¢	âŒ Modify canonical control packages

If any npm install fails, you must STOP immediately and report the exact error.

â¸»

âœ… CANONICAL SOURCE OF TRUTH

All control logic MUST flow from published npm packages only:

npm install \
  @webwaka/core-dashboard-control \
  @webwaka/core-permissions \
  @webwaka/core-entitlements \
  @webwaka/core-feature-flags \
  @webwaka/core-branding \
  @webwaka/suite-superadmin-dashboard-control \
  @webwaka/suite-partner-dashboard-control \
  @webwaka/suite-tenant-dashboard-control \
  @webwaka/suite-pos-control \
  @webwaka/suite-svm-control

ğŸ“Œ These packages are:
	â€¢	Public
	â€¢	Auth-free
	â€¢	Pre-built (dist/ included)
	â€¢	npm-registry hosted
	â€¢	Constitutionally ratified

â¸»

ğŸ¯ PHASE 4C OBJECTIVE

Extend the dashboard UI to support additional Suite dashboards (Partner, Tenant, POS, SVM) while maintaining strict constitutional compliance.

The UI must remain a pure declarative consumer.

â¸»

ğŸ§± REQUIRED ARCHITECTURE (MANDATORY)

1ï¸âƒ£ Single Control Consumer

Create or update:

src/lib/control-consumer.ts

This file must be the ONLY place that imports any @webwaka/*-control package.

Example pattern (adapt, do not copy blindly):

import {
  resolveDashboard,
  generateDashboardSnapshot,
  evaluateFromSnapshot
} from '@webwaka/core-dashboard-control';

import {
  resolveSuperAdminDashboard
} from '@webwaka/suite-superadmin-dashboard-control';

import {
  resolvePartnerDashboard
} from '@webwaka/suite-partner-dashboard-control';

export {
  resolveDashboard,
  generateDashboardSnapshot,
  evaluateFromSnapshot,
  resolveSuperAdminDashboard,
  resolvePartnerDashboard
};

ğŸš¨ No other file may import control packages directly.

â¸»

2ï¸âƒ£ Server-Side Resolution ONLY
	â€¢	Dashboard resolution MUST occur in server components
	â€¢	Snapshot generation MUST occur server-side
	â€¢	Client components receive pre-resolved data only

âœ… Allowed:

// app/page.tsx (server)
const resolved = resolvePartnerDashboard(context);

âŒ Forbidden:

// components/Dashboard.tsx
resolvePartnerDashboard(...)


â¸»

3ï¸âƒ£ UI = Pure Consumer

UI components must:
	â€¢	Render based on .visible flags
	â€¢	Never check permissions, entitlements, roles, or flags
	â€¢	Never perform hashing or integrity checks
	â€¢	Never call control engines

UI logic = presentation only

â¸»

4ï¸âƒ£ Determinism Rules
	â€¢	All evaluations must accept context.evaluationTime
	â€¢	âŒ No Date.now()
	â€¢	âŒ No Math.random() in control paths
	â€¢	Snapshot integrity must come from canonical engines

(Cosmetic UI-only randomness is allowed but discouraged.)

â¸»

5ï¸âƒ£ CI / Build Integrity
	â€¢	npm test must fail loudly
	â€¢	npm run build must pass
	â€¢	No masked failures (|| true, echo "skip")

â¸»

ğŸ” REQUIRED VERIFICATION (DO NOT SKIP)

Before stopping:
	â€¢	âœ… npm install (npm-only, no git)
	â€¢	âœ… npm test passes
	â€¢	âœ… npm run build passes
	â€¢	âœ… grep confirms only control-consumer.ts imports @webwaka/*
	â€¢	âœ… UI renders dashboards correctly

â¸»

â›” HARD STOP

After completing Phase 4C:

â›” STOP
â›” Do NOT proceed to Phase 4D
â›” Await explicit authorization

â¸»

ACKNOWLEDGEMENT FORMAT (MANDATORY)

Reply only with:

â€œPhase 4C acknowledged. Proceeding using npm-installed @webwaka packages only.â€

Then execute.